instructions:
  - BuildGraph:
      graphs:
        EE509_1:
          - Create:
              name: EE509_1

      groups:
        EE509_1:
          - Create:
              name: Source
              node_attr:
                ns_type: PacketSource
                ns_attr:
                  arrival_time_distr: Exponential
                  arrival_distr_params:
                    lambda: 1000

                  size_distr: Exponential
                  size_distr_params:
                    lambda: 0.002

                  flow_distr: Constant
                  flow_distr_params:
                    constant: 1

          - Create:
              name: Switch
              node_attr:
                ns_type: PacketSwitch
                ns_attr: {}
          - Create:
              name: Sink
              node_attr:
                ns_type: PacketSink
                ns_attr: {}

      adjacency:
        EE509_1:
        - P2P:
            node_lhs: Source
            node_rhs: Switch
            edge_attr:
              ns_attr:
                rx:
                  propagation_delay: 0.0

        - P2P:
            node_lhs: Switch
            node_rhs: Sink
            edge_attr:
              ns_attr:
                tx:
                  bw: 10000000
                  queue_len_limit: 0
                rx:
                  propagation_delay: 0.0

  - ValidateGraphJQ:
      EE509_1:
        - jq_expr: ".nodes | length"
          expected: 3

        - jq_expr: ".links | length"
          expected: 2

  - RunNetSim:
      graph: EE509_1
      until_time: 1000
      stat_interval: 1000

  - PrintSimData:
      graph: EE509_1
