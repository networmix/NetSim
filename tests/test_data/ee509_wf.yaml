instructions:
  - BuildGraph:
      graphs:
        EE509_1:
          - Create:
              name: EE509_1

      groups:
        EE509_1:
          - Create:
              name: Source
              node_attr:
                ns_type: PacketSource
                ns_attr:
                  arrival_time_distr: Exponential
                  arrival_distr_params:
                    lambda: 1000

                  size_distr: Exponential
                  size_distr_params:
                    lambda: 0.002

                  flow_distr: Constant
                  flow_distr_params:
                    constant: 1

          - Create:
              name: InterfaceTx
              node_attr:
                ns_type: PacketInterfaceTx
                ns_attr:
                  bw: 10000000
          - Create:
              name: Sink
              node_attr:
                ns_type: PacketSink
                ns_attr: {}

      adjacency:
        EE509_1:
        - P2P:
            node_lhs: Source
            node_rhs: InterfaceTx
            edge_attr:
              ns_attr: {}

        - P2P:
            node_lhs: InterfaceTx
            node_rhs: Sink
            edge_attr:
              ns_attr: {}

  - ValidateGraphJQ:
      EE509_1:
        - jq_expr: ".nodes | length"
          expected: 3

        - jq_expr: ".links | length"
          expected: 2

  - RunNetSim:
      graph: EE509_1
      until_time: 10
      stat_interval: 10
      enable_stat_trace: True
      enable_packet_trace: True


  - PrintSimData:
      graph: EE509_1

  - SaveSimData:
      graph: EE509_1
      dir_path: ""
      trace_scope: [nsim, ns_obj]
