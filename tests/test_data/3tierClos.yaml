graphs:
  3tierClos:
    - Create:
        name: 3tierClos

groups:
  $graphs:
    b1:
      t1:
        - Create:
            name_template: "{path[2]}-{path[3]}-r{node_num}"
            node_count: 4
            node_attr:
              role: t1

      t2:
        - Create:
            name_template: "{path[2]}-{path[3]}-r{node_num}"
            node_count: 4

    b2:
      t1:
        - Create:
            name_template: "{path[2]}-{path[3]}-r{node_num}"
            node_count: 4
            node_attr:
              role: t1

      t2:
        - Create:
            name_template: "{path[2]}-{path[3]}-r{node_num}"
            node_count: 4

    spine:
      s1:
        - Create:
            name_template: "{path[3]}-t3-r{node_num}"
            node_count: 4      

      s2:
        - Create:
            name_template: "{path[3]}-t3-r{node_num}"
            node_count: 4 

adjacency:
  $graphs:
    - Mesh:
        group_lhs: t1
        group_rhs: t2
        scope_level: 1
        bidirectional: True
        edge_attr:
          capacity: 100000

    - Ladder:
        group_lhs: t2
        group_rhs: spine
        bidirectional: True
        edge_attr:
          capacity: 100000
