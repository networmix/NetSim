instructions:
  - BuildGraph:
      graphs:
        2tierClos:
          - Create:
              name: 2tierClos

      groups:
        $graphs:
          t1:
            - Create:
                name_template: "{path[2]}-r{node_num}"
                node_count: 4
                node_attr:
                  role: t1

          t2:
            - Create:
                name_template: "{path[2]}-r{node_num}"
                node_count: 4

      adjacency:
        $graphs:
          - Mesh:
              group_lhs: t1
              group_rhs: t2
              bidirectional: True
              edge_attr:
                capacity: 100000
  - ValidateGraphJQ:
      2tierClos:
        - jq_expr: ".nodes | length"
          expected: 8

        - jq_expr: ".links | length"
          expected: 32