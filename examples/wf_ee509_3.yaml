instructions:
  - BuildGraph:
      graphs:
        EE509_2:
          - Create:
              name: EE509_2

      groups:
        EE509_2:
          - Create:
              name: Source
              node_attr:
                ns_type: PacketSource
                ns_attr:
                  arrival_time_distr: Exponential
                  arrival_distr_params:
                    lambda: 2750

                  size_distr: Exponential
                  size_distr_params:
                    lambda: 0.002

                  flow_distr: Constant
                  flow_distr_params:
                    constant: 1

          - Create:
              name: InterfaceTx
              node_attr:
                ns_type: PacketInterfaceTx
                ns_attr:
                  bw: 10000000
                  queue_len_limit: 30
                  admission_params:
                    admission_policy: "red"
                    wq: 0.005
                    minth: 5
                    maxth: 15
                    maxp: 0.05
                    s: 0.00008

          - Create:
              name: Sink
              node_attr:
                ns_type: PacketSink
                ns_attr: {}

      adjacency:
        EE509_2:
        - P2P:
            node_lhs: Source
            node_rhs: InterfaceTx
            edge_attr:
              ns_attr: {}

        - P2P:
            node_lhs: InterfaceTx
            node_rhs: Sink
            edge_attr:
              ns_attr: {}

  - RunNetSim:
      graph: EE509_2
      until_time: 250
      stat_interval: 5
      enable_stat_trace: True
      enable_obj_trace: False
      enable_packet_trace: False

  - ExportSimData:
      graph: EE509_2
      dir_path: ""
      trace_scope: [nsim, ns_obj]

  - ProcessSimData:
      graph: EE509_2
      dir_path: ""
      ns_obj: InterfaceTx
      stat_type: NetSimStat
      analyser_type: NetSimIntQueueAnalyser
